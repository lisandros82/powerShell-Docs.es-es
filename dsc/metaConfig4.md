---
ms.date: 2017-10-12
ms.topic: conceptual
keywords: dsc,powershell,configuration,setup
title: "Administrador de configuración local (LCM) de la configuración de estado deseado de Windows PowerShell 4.0"
ms.openlocfilehash: 6ff8fa75f8ed33dc8da5285373ec1f3858cfa917
ms.sourcegitcommit: a444406120e5af4e746cbbc0558fe89a7e78aef6
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/17/2018
---
# <a name="windows-powershell-40-desired-state-configuration-local-configuration-manager-lcm"></a><span data-ttu-id="4ab75-103">Administrador de configuración local (LCM) de la configuración de estado deseado de Windows PowerShell 4.0</span><span class="sxs-lookup"><span data-stu-id="4ab75-103">Windows PowerShell 4.0 Desired State Configuration Local Configuration Manager (LCM)</span></span>

><span data-ttu-id="4ab75-104">Se aplica a Windows PowerShell 4.0</span><span class="sxs-lookup"><span data-stu-id="4ab75-104">Applies To: Windows PowerShell 4.0</span></span>

<span data-ttu-id="4ab75-105">El administrador de configuración local es el motor de la configuración de estado deseado (DSC) de Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4ab75-105">Local Configuration Manager is the Windows PowerShell Desired State Configuration (DSC) engine.</span></span>
<span data-ttu-id="4ab75-106">Se ejecuta en todos los nodos de destino y es el responsable de llamar a los recursos de configuración que se incluyen en un script de configuración DSC.</span><span class="sxs-lookup"><span data-stu-id="4ab75-106">It runs on all target nodes, and it is responsible for calling the configuration resources that are included in a DSC configuration script.</span></span>
<span data-ttu-id="4ab75-107">En este tema se enumeran las propiedades del administrador de configuración local y se describe cómo puede modificar la configuración del administrador de configuración local en un nodo de destino.</span><span class="sxs-lookup"><span data-stu-id="4ab75-107">This topic lists the properties of Local Configuration Manager and describes how you can modify the Local Configuration Manager settings on a target node.</span></span>

## <a name="local-configuration-manager-properties"></a><span data-ttu-id="4ab75-108">Propiedades del administrador de configuración local</span><span class="sxs-lookup"><span data-stu-id="4ab75-108">Local Configuration Manager properties</span></span>

<span data-ttu-id="4ab75-109">A continuación se enumeran las propiedades del administrador de configuración local que se pueden establecer o recuperar.</span><span class="sxs-lookup"><span data-stu-id="4ab75-109">The following lists the Local Configuration Manager properties that you can set or retrieve.</span></span>

- <span data-ttu-id="4ab75-110">**AllowModuleOverwrite**: controla si se permite que las nuevas configuraciones descargadas desde el servicio de configuración sobrescriban las antiguas en el nodo de destino.</span><span class="sxs-lookup"><span data-stu-id="4ab75-110">**AllowModuleOverwrite**: Controls whether new configurations downloaded from the configuration service are allowed to overwrite the old ones on the target node.</span></span> <span data-ttu-id="4ab75-111">Los valores posibles son True y False.</span><span class="sxs-lookup"><span data-stu-id="4ab75-111">Possible values are True and False.</span></span>
- <span data-ttu-id="4ab75-112">**CertificateID**: la huella digital de un certificado usado para proteger las credenciales que se han pasado en una configuración.</span><span class="sxs-lookup"><span data-stu-id="4ab75-112">**CertificateID**: The thumbprint of a certificate used to secure credentials passed in a configuration.</span></span> <span data-ttu-id="4ab75-113">Para más información, consulte [Want to secure credentials in Windows PowerShell Desired State Configuration?](http://blogs.msdn.com/b/powershell/archive/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration.aspx) (¿Quiere proteger las credenciales de configuración de estado deseado de Windows PowerShell?).</span><span class="sxs-lookup"><span data-stu-id="4ab75-113">For more information see [Want to secure credentials in Windows PowerShell Desired State Configuration?](http://blogs.msdn.com/b/powershell/archive/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration.aspx).</span></span>
- <span data-ttu-id="4ab75-114">**ConfigurationID**: indica un GUID que se usa para obtener un archivo de configuración determinado de un servicio de extracción.</span><span class="sxs-lookup"><span data-stu-id="4ab75-114">**ConfigurationID**: Indicates a GUID which is used to get a particular configuration file from a pull service.</span></span> <span data-ttu-id="4ab75-115">El GUID garantiza que se acceda al archivo de configuración correcto.</span><span class="sxs-lookup"><span data-stu-id="4ab75-115">The GUID ensures that the correct configuration file is accessed.</span></span>
- <span data-ttu-id="4ab75-116">**ConfigurationMode**: especifica cómo aplica realmente el administrador de la configuración local la configuración en los nodos de destino.</span><span class="sxs-lookup"><span data-stu-id="4ab75-116">**ConfigurationMode**: Specifies how the Local Configuration Manager actually applies the configuration to the target nodes.</span></span> <span data-ttu-id="4ab75-117">Puede tomar los valores siguientes:</span><span class="sxs-lookup"><span data-stu-id="4ab75-117">It can take the following values:</span></span>
  - <span data-ttu-id="4ab75-118">**ApplyOnly**: con esta opción, DSC aplica la configuración y no hace nada más, a menos que se detecte una nueva configuración, ya sea porque envíe una configuración nueva directamente al nodo de destino, o bien si se está conectando a un servicio de extracción y DSC detecta una configuración nueva cuando hace una comprobación con el servidor de extracción.</span><span class="sxs-lookup"><span data-stu-id="4ab75-118">**ApplyOnly**: With this option, DSC applies the configuration and does nothing further unless a new configuration is detected, either by you sending a new configuration directly to the target node or if you are connecting to a pull service and DSC discovers a new configuration when it checks with the pull service.</span></span> <span data-ttu-id="4ab75-119">Si se desplaza la configuración del nodo de destino, no se realiza ninguna acción.</span><span class="sxs-lookup"><span data-stu-id="4ab75-119">If the target node’s configuration drifts, no action is taken.</span></span>
  - <span data-ttu-id="4ab75-120">**ApplyAndMonitor**: con esta opción (que es el valor predeterminado), DSC aplica a las nuevas configuraciones, ya sea porque las envíe directamente al nodo de destino o porque se detecten en un servicio de extracción.</span><span class="sxs-lookup"><span data-stu-id="4ab75-120">**ApplyAndMonitor**: With this option (which is the default), DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span> <span data-ttu-id="4ab75-121">A partir de ahí, si la configuración del nodo de destino se desplaza del archivo de configuración, DSC notifica la discrepancia en los registros.</span><span class="sxs-lookup"><span data-stu-id="4ab75-121">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs.</span></span> <span data-ttu-id="4ab75-122">Para conocer más sobre el registro de DSC, consulte [Uso de registros de eventos para diagnosticar errores de la configuración de estado deseado](http://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span><span class="sxs-lookup"><span data-stu-id="4ab75-122">For more about DSC logging, see [Using Event Logs to Diagnose Errors in Desired State Configuration](http://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span></span>
  - <span data-ttu-id="4ab75-123">**ApplyAndAutoCorrect**: con esta opción, DSC aplica a las nuevas configuraciones, ya sea porque las envíe directamente al nodo de destino o porque se detecten en un servicio de extracción.</span><span class="sxs-lookup"><span data-stu-id="4ab75-123">**ApplyAndAutoCorrect**: With this option, DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span> <span data-ttu-id="4ab75-124">A partir de ahí, si la configuración del nodo de destino se desplaza del archivo de configuración, DSC notifica la discrepancia en los registros y luego intenta ajustar la configuración del nodo de destino para que sea conforme con el archivo de configuración.</span><span class="sxs-lookup"><span data-stu-id="4ab75-124">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs, and then attempts to adjust the target node configuration to bring in compliance with the configuration file.</span></span>
- <span data-ttu-id="4ab75-125">**ConfigurationModeFrequencyMins**: representa la frecuencia (en minutos) con que la aplicación en segundo plano de DSC intenta implementar la configuración actual en el nodo de destino.</span><span class="sxs-lookup"><span data-stu-id="4ab75-125">**ConfigurationModeFrequencyMins**: Represents the frequency (in minutes) at which the background application of DSC attempts to implement the current configuration on the target node.</span></span> <span data-ttu-id="4ab75-126">El valor predeterminado es 15.</span><span class="sxs-lookup"><span data-stu-id="4ab75-126">The default value is 15.</span></span> <span data-ttu-id="4ab75-127">Este valor se puede establecer en combinación con RefreshMode.</span><span class="sxs-lookup"><span data-stu-id="4ab75-127">This value can be set in conjunction with RefreshMode.</span></span> <span data-ttu-id="4ab75-128">Cuando el valor de RefreshMode se establece en PULL, el nodo de destino contacta con el servicio de configuración en un intervalo que establece el valor de RefreshFrequencyMins y descarga la configuración actual.</span><span class="sxs-lookup"><span data-stu-id="4ab75-128">When RefreshMode is set to PULL, the target node contacts the configuration service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="4ab75-129">Independientemente del valor de RefreshMode, en el intervalo que define ConfigurationModeFrequencyMins, el motor de coherencia aplica la configuración más reciente que se haya descargado en el nodo de destino.</span><span class="sxs-lookup"><span data-stu-id="4ab75-129">Regardless of the RefreshMode value, at the interval set by ConfigurationModeFrequencyMins, the consistency engine applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="4ab75-130">El valor de RefreshFrequencyMins debe establecerse en un entero que sea múltiplo del valor de ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="4ab75-130">RefreshFrequencyMins should be set to an integer multiple of ConfigurationModeFrequencyMins.</span></span>
- <span data-ttu-id="4ab75-131">**Credential**: indica las credenciales (como ocurre con Get-Credential) necesarias para acceder a recursos remotos, como para contactar con el servicio de configuración.</span><span class="sxs-lookup"><span data-stu-id="4ab75-131">**Credential**: Indicates credentials (as with Get-Credential) required to access remote resources, such as to contact the configuration service.</span></span>
- <span data-ttu-id="4ab75-132">**DownloadManagerCustomData**: representa una matriz que contiene datos personalizados específicos del administrador de descargas.</span><span class="sxs-lookup"><span data-stu-id="4ab75-132">**DownloadManagerCustomData**: Represents an array that contains custom data specific to the download manager.</span></span>
- <span data-ttu-id="4ab75-133">**DownloadManagerName**: indica el nombre de la configuración y el administrador de descargas del módulo.</span><span class="sxs-lookup"><span data-stu-id="4ab75-133">**DownloadManagerName**: Indicates the name of the configuration and module download manager.</span></span>
- <span data-ttu-id="4ab75-134">**RebootNodeIfNeeded**: determinados cambios de configuración en un nodo de destino pueden requerir que deba reiniciarse para que se apliquen los cambios.</span><span class="sxs-lookup"><span data-stu-id="4ab75-134">**RebootNodeIfNeeded**: Certain configuration changes on a target node might require it to be restarted for the changes to be applied.</span></span> <span data-ttu-id="4ab75-135">Con el valor **True**, esta propiedad reiniciará el nodo en cuanto la configuración se haya aplicado completamente, sin ninguna advertencia más.</span><span class="sxs-lookup"><span data-stu-id="4ab75-135">With the value **True**, this property will restart the node as soon as the configuration has been completely applies, without further warning.</span></span> <span data-ttu-id="4ab75-136">Si es **False** (el valor predeterminado), la configuración se completará, pero el nodo deberá reiniciarse manualmente para que los cambios surtan efecto.</span><span class="sxs-lookup"><span data-stu-id="4ab75-136">If **False** (the default value), the configuration will be completed, but the node must be restarted manually for the changes to take effect.</span></span>
- <span data-ttu-id="4ab75-137">**RefreshFrequencyMins**: se usa cuando se ha configurado un servicio de extracción.</span><span class="sxs-lookup"><span data-stu-id="4ab75-137">**RefreshFrequencyMins**: Used when you have set up a pull service.</span></span> <span data-ttu-id="4ab75-138">Representa la frecuencia (en minutos) con que el administrador de configuración local contacta con un servicio de extracción para descargar la configuración actual.</span><span class="sxs-lookup"><span data-stu-id="4ab75-138">Represents the frequency (in minutes) at which the Local Configuration Manager contacts a pull service to download the current configuration.</span></span> <span data-ttu-id="4ab75-139">Este valor se puede establecer junto con ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="4ab75-139">This value can be set in conjunction with ConfigurationModeFrequencyMins.</span></span> <span data-ttu-id="4ab75-140">Cuando el valor de RefreshMode se establece en PULL, el nodo de destino contacta con el servicio de extracción "pull" en un intervalo que establece el valor de RefreshFrequencyMins y descarga la configuración actual.</span><span class="sxs-lookup"><span data-stu-id="4ab75-140">When RefreshMode is set to PULL, the target node contacts the pull service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="4ab75-141">En el intervalo que define ConfigurationModeFrequencyMins, el motor de coherencia aplica la configuración más reciente que se haya descargado en el nodo de destino.</span><span class="sxs-lookup"><span data-stu-id="4ab75-141">At the interval set by ConfigurationModeFrequencyMins, the consistency engine then applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="4ab75-142">Si el valor de RefreshFrequencyMins no se establece en un entero que sea múltiplo del valor de ConfigurationModeFrequencyMins, el sistema lo redondeará al alza.</span><span class="sxs-lookup"><span data-stu-id="4ab75-142">If RefreshFrequencyMins is not set to an integer multiple of ConfigurationModeFrequencyMins, the system will round it up.</span></span> <span data-ttu-id="4ab75-143">El valor predeterminado es 30.</span><span class="sxs-lookup"><span data-stu-id="4ab75-143">The default value is 30.</span></span>
- <span data-ttu-id="4ab75-144">**RefreshMode**: los valores posibles son **Push** (el valor predeterminado) y **Pull**.</span><span class="sxs-lookup"><span data-stu-id="4ab75-144">**RefreshMode**: Possible values are **Push** (the default) and **Pull**.</span></span> <span data-ttu-id="4ab75-145">En la configuración "push", debe colocar un archivo de configuración en cada nodo de destino, mediante cualquier equipo cliente.</span><span class="sxs-lookup"><span data-stu-id="4ab75-145">In the “push” configuration, you must place a configuration file on each target node, using any client computer.</span></span> <span data-ttu-id="4ab75-146">En el modo "pull", debe configurar un servicio de extracción con el que el administrador de configuración local contacte y acceda a los archivos de configuración.</span><span class="sxs-lookup"><span data-stu-id="4ab75-146">In the “pull” mode, you must set up a pull service for Local Configuration Manager to contact and access the configuration files.</span></span>

### <a name="example-of-updating-local-configuration-manager-settings"></a><span data-ttu-id="4ab75-147">Ejemplo de actualización de la configuración del administrador de configuración local</span><span class="sxs-lookup"><span data-stu-id="4ab75-147">Example of updating Local Configuration Manager settings</span></span>

<span data-ttu-id="4ab75-148">Puede actualizar la configuración del administrador de configuración local de un nodo de destino si incluye un bloque **LocalConfigurationManager** dentro del bloque del nodo en un script de configuración, como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="4ab75-148">You can update the Local Configuration Manager settings of a target node by including a **LocalConfigurationManager** block inside the node block in a configuration script, as shown in the following example.</span></span>

```powershell
Configuration ExampleConfig
{
    Node “Server001”
    {
        LocalConfigurationManager
        {
            ConfigurationID = "646e48cb-3082-4a12-9fd9-f71b9a562d4e"
            ConfigurationModeFrequencyMins = 45
            ConfigurationMode = "ApplyAndAutocorrect"
            RefreshMode = "Pull"
            RefreshFrequencyMins = 90
            DownloadManagerName = "WebDownloadManager"
            DownloadManagerCustomData = (@{ServerUrl="https://$PullService/psdscpullserver.svc"})
            CertificateID = "71AA68562316FE3F73536F1096B85D66289ED60E"
            Credential = $cred
            RebootNodeIfNeeded = $true
            AllowModuleOverwrite = $false
        }
# One or more resource blocks can be added here
    }
}

# The following line invokes the configuration and creates a file called Server001.meta.mof at the specified path
ExampleConfig -OutputPath "c:\users\public\dsc"
```

<span data-ttu-id="4ab75-149">La ejecución del script del ejemplo anterior genera un archivo MOF que especifica y almacena la configuración deseada.</span><span class="sxs-lookup"><span data-stu-id="4ab75-149">Running the script in the previous example generates a MOF file that specifies and stores the desired settings.</span></span>
<span data-ttu-id="4ab75-150">Para aplicar la configuración, puede usar el cmdlet **Set-DscLocalConfigurationManager**, como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="4ab75-150">To apply the settings, you can use the **Set-DscLocalConfigurationManager** cmdlet, as shown in the following example.</span></span>

```powershell
Set-DscLocalConfigurationManager -Path "c:\users\public\dsc"
```

> <span data-ttu-id="4ab75-151">**Nota**: Para el parámetro **Path** debe especificar la misma ruta de acceso que especificó para el parámetro **OutputPath** cuando invocó la configuración del ejemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="4ab75-151">**Note**: For the **Path** parameter, you must specify the same path that you specified for the **OutputPath** parameter when you invoked the configuration in the previous example.</span></span>

<span data-ttu-id="4ab75-152">Para ver la configuración actual del administrador de configuración local, puede utilizar el cmdlet **Get-DscLocalConfigurationManager**.</span><span class="sxs-lookup"><span data-stu-id="4ab75-152">To see the current Local Configuration Manager settings, you can use the **Get-DscLocalConfigurationManager** cmdlet.</span></span>
<span data-ttu-id="4ab75-153">Si invoca este cmdlet sin parámetros, de forma predeterminada obtendrá la configuración del administrador de configuración local del nodo en el que se ejecuta.</span><span class="sxs-lookup"><span data-stu-id="4ab75-153">If you invoke this cmdlet with no parameters, by default it will get the Local Configuration Manager settings for the node on which you run it.</span></span>
<span data-ttu-id="4ab75-154">Para especificar otro nodo, use el parámetro **CimSession** con este cmdlet.</span><span class="sxs-lookup"><span data-stu-id="4ab75-154">To specify another node, use the **CimSession** parameter with this cmdlet.</span></span>
