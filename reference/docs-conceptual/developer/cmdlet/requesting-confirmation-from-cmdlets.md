---
title: Solicitando confirmación de cmdlets | Microsoft Docs
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- ConfirmImpact [PowerShell Programmer's Guide], described
- ShouldContinue [PowerShell Programmer's Guide], described
- user feedback [PowerShell Programmer's Guide], requesting
- ShouldProcess [PowerShell Programmer's Guide], described
- ConfirmPreference [PowerShell Programmer's Guide], described
ms.assetid: 37d6e87f-57b7-40bd-b645-392cf0b6e88e
caps.latest.revision: 13
ms.openlocfilehash: 0c0517ef7fbd5ae6434773a2dfe276f3a8c35f39
ms.sourcegitcommit: debd2b38fb8070a7357bf1a4bf9cc736f3702f31
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/05/2019
ms.locfileid: "72369534"
---
# <a name="requesting-confirmation-from-cmdlets"></a><span data-ttu-id="13217-102">Solicitud de confirmación de los cmdlets</span><span class="sxs-lookup"><span data-stu-id="13217-102">Requesting Confirmation from Cmdlets</span></span>

<span data-ttu-id="13217-103">Los cmdlets deben solicitar confirmación cuando están a punto de hacer un cambio en el sistema que está fuera del entorno de Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="13217-103">Cmdlets should request confirmation when they are about to make a change to the system that is outside of the Windows PowerShell environment.</span></span> <span data-ttu-id="13217-104">Por ejemplo, si un cmdlet está a punto de agregar una cuenta de usuario o detener un proceso, el cmdlet debe solicitar confirmación al usuario antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="13217-104">For example, if a cmdlet is about to add a user account or stop a process, the cmdlet should require confirmation from the user before it proceeds.</span></span> <span data-ttu-id="13217-105">Por el contrario, si un cmdlet está a punto de cambiar una variable de Windows PowerShell, no es necesario que el cmdlet requiera confirmación.</span><span class="sxs-lookup"><span data-stu-id="13217-105">In contrast, if a cmdlet is about to change a Windows PowerShell variable, the cmdlet does not need to require confirmation.</span></span>

<span data-ttu-id="13217-106">Para llevar a cabo una solicitud de confirmación, el cmdlet debe indicar que admite solicitudes de confirmación y debe llamar a los métodos [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) y [System. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (opcional) para mostrar un mensaje de solicitud de confirmación.</span><span class="sxs-lookup"><span data-stu-id="13217-106">In order to make a confirmation request, the cmdlet must indicate that it supports confirmation requests, and it must call the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (optional) methods to display a confirmation request message.</span></span>

## <a name="supporting-confirmation-requests"></a><span data-ttu-id="13217-107">Compatibilidad con solicitudes de confirmación</span><span class="sxs-lookup"><span data-stu-id="13217-107">Supporting Confirmation Requests</span></span>

<span data-ttu-id="13217-108">Para admitir las solicitudes de confirmación, el cmdlet debe establecer el parámetro `SupportsShouldProcess` del atributo cmdlet en `true`.</span><span class="sxs-lookup"><span data-stu-id="13217-108">To support confirmation requests, the cmdlet must set the `SupportsShouldProcess` parameter of the Cmdlet attribute to `true`.</span></span> <span data-ttu-id="13217-109">Esto habilita los parámetros de cmdlet `Confirm` y `WhatIf` que se proporcionan con Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="13217-109">This enables the `Confirm` and `WhatIf` cmdlet parameters that are provided by Windows PowerShell.</span></span> <span data-ttu-id="13217-110">El parámetro `Confirm` permite al usuario controlar si se muestra la solicitud de confirmación.</span><span class="sxs-lookup"><span data-stu-id="13217-110">The `Confirm` parameter allows the user to control whether the confirmation request is displayed.</span></span> <span data-ttu-id="13217-111">El parámetro `WhatIf` permite al usuario determinar si el cmdlet debe mostrar un mensaje o realizar su acción.</span><span class="sxs-lookup"><span data-stu-id="13217-111">The `WhatIf` parameter allows the user to determine whether the cmdlet should display a message or perform its action.</span></span> <span data-ttu-id="13217-112">No agregue manualmente los parámetros `Confirm` y `WhatIf` a un cmdlet.</span><span class="sxs-lookup"><span data-stu-id="13217-112">Do not manually add the `Confirm` and `WhatIf` parameters to a cmdlet.</span></span>

<span data-ttu-id="13217-113">En el ejemplo siguiente se muestra una declaración de atributo de cmdlet que admite solicitudes de confirmación.</span><span class="sxs-lookup"><span data-stu-id="13217-113">The following example shows a Cmdlet attribute declaration that supports confirmation requests.</span></span>

```csharp
[Cmdlet(VerbsDiagnostic.Test, "RequestConfirmationTemplate1",
        SupportsShouldProcess = true)]
```

## <a name="calling-the-confirmation-request-methods"></a><span data-ttu-id="13217-114">Llamar a los métodos de solicitud de confirmación</span><span class="sxs-lookup"><span data-stu-id="13217-114">Calling the Confirmation request methods</span></span>

<span data-ttu-id="13217-115">En el código del cmdlet, llame al método [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) antes de que se realice la operación que cambia el sistema.</span><span class="sxs-lookup"><span data-stu-id="13217-115">In the cmdlet code, call the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method before the operation that changes the system is performed.</span></span> <span data-ttu-id="13217-116">Diseñe el cmdlet de modo que si la llamada devuelve un valor de `false`, no se realiza la operación y el cmdlet procesa la siguiente operación.</span><span class="sxs-lookup"><span data-stu-id="13217-116">Design the cmdlet so that if the call returns a value of `false`, the operation is not performed, and the cmdlet processes the next operation.</span></span>

## <a name="calling-the-shouldcontinue-method"></a><span data-ttu-id="13217-117">Llamar al método ShouldContinue</span><span class="sxs-lookup"><span data-stu-id="13217-117">Calling the ShouldContinue Method</span></span>

<span data-ttu-id="13217-118">La mayoría de los cmdlets solicitan confirmación usando solo el método [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) .</span><span class="sxs-lookup"><span data-stu-id="13217-118">Most cmdlets request confirmation using only the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method.</span></span> <span data-ttu-id="13217-119">Sin embargo, algunos casos pueden requerir confirmación adicional.</span><span class="sxs-lookup"><span data-stu-id="13217-119">However, some cases might require additional confirmation.</span></span> <span data-ttu-id="13217-120">En estos casos, complemente la llamada a [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) con una llamada al método [System. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) .</span><span class="sxs-lookup"><span data-stu-id="13217-120">For these cases, supplement the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call with a call to the [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method.</span></span> <span data-ttu-id="13217-121">Esto permite que el cmdlet o el proveedor controlen de forma más precisa el ámbito de la respuesta de **sí a todo** en la solicitud de confirmación.</span><span class="sxs-lookup"><span data-stu-id="13217-121">This allows the cmdlet or provider to more finely control the scope of the **Yes to all** response to the confirmation prompt.</span></span>

<span data-ttu-id="13217-122">Si un cmdlet llama al método [System. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) , el cmdlet también debe proporcionar un parámetro de modificador `Force`.</span><span class="sxs-lookup"><span data-stu-id="13217-122">If a cmdlet calls the [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method, the cmdlet must also provide a `Force` switch parameter.</span></span> <span data-ttu-id="13217-123">Si el usuario especifica `Force` cuando el usuario invoca el cmdlet, el cmdlet todavía debe llamar a [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), pero debe omitir la llamada a [System. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="13217-123">If the user specifies `Force` when the user invokes the cmdlet, the cmdlet should still call [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), but it should bypass the call to [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

<span data-ttu-id="13217-124">[System. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) producirá una excepción cuando se llame desde un entorno no interactivo en el que no se puede solicitar al usuario.</span><span class="sxs-lookup"><span data-stu-id="13217-124">[System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) will throw an exception when it is called from a non-interactive environment where the user cannot be prompted.</span></span> <span data-ttu-id="13217-125">La adición de un parámetro `Force` garantiza que el comando todavía puede realizarse cuando se invoca en un entorno no interactivo.</span><span class="sxs-lookup"><span data-stu-id="13217-125">Adding a `Force` parameter ensures that the command can still be performed when it is invoked in a non-interactive environment.</span></span>

<span data-ttu-id="13217-126">En el ejemplo siguiente se muestra cómo llamar a [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) y [System. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="13217-126">The following example shows how to call [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

```csharp
if (ShouldProcess (...) )
{
  if (Force || ShouldContinue(...))
  {
     // Add code that performs the operation.
  }
}
```

<span data-ttu-id="13217-127">El comportamiento de una llamada a [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) puede variar en función del entorno en el que se invoca el cmdlet.</span><span class="sxs-lookup"><span data-stu-id="13217-127">The behavior of a [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call can vary depending on the environment in which the cmdlet is invoked.</span></span> <span data-ttu-id="13217-128">El uso de las instrucciones anteriores le ayudará a asegurarse de que el cmdlet se comporta de forma coherente con otros cmdlets, independientemente del entorno del host.</span><span class="sxs-lookup"><span data-stu-id="13217-128">Using the previous guidelines will help ensure that the cmdlet behaves consistently with other cmdlets, regardless of the host environment.</span></span>

<span data-ttu-id="13217-129">Para obtener un ejemplo de llamada al método [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) , vea [Cómo solicitar confirmaciones](./how-to-request-confirmations.md).</span><span class="sxs-lookup"><span data-stu-id="13217-129">For an example of calling the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, see [How to Request Confirmations](./how-to-request-confirmations.md).</span></span>

## <a name="specify-the-impact-level"></a><span data-ttu-id="13217-130">Especificar el nivel de impacto</span><span class="sxs-lookup"><span data-stu-id="13217-130">Specify the Impact Level</span></span>

<span data-ttu-id="13217-131">Cuando cree el cmdlet, especifique el nivel de impacto (gravedad) del cambio.</span><span class="sxs-lookup"><span data-stu-id="13217-131">When you create the cmdlet, specify the impact level (the severity) of the change.</span></span> <span data-ttu-id="13217-132">Para ello, establezca el valor del parámetro `ConfirmImpact` del atributo cmdlet en alto, medio o bajo.</span><span class="sxs-lookup"><span data-stu-id="13217-132">To do this, set the value of the `ConfirmImpact` parameter of the Cmdlet attribute to High, Medium, or Low.</span></span> <span data-ttu-id="13217-133">Solo puede especificar un valor para `ConfirmImpact` Cuando especifique también el parámetro `SupportsShouldProcess` para el cmdlet.</span><span class="sxs-lookup"><span data-stu-id="13217-133">You can specify a value for `ConfirmImpact` only when you also specify the `SupportsShouldProcess` parameter for the cmdlet.</span></span>

<span data-ttu-id="13217-134">Para la mayoría de los cmdlets, no es necesario especificar explícitamente `ConfirmImpact`.</span><span class="sxs-lookup"><span data-stu-id="13217-134">For most cmdlets, you do not have to explicitly specify `ConfirmImpact`.</span></span>  <span data-ttu-id="13217-135">En su lugar, use el valor predeterminado del parámetro, que es medio.</span><span class="sxs-lookup"><span data-stu-id="13217-135">Instead, use the default setting of the parameter, which is Medium.</span></span> <span data-ttu-id="13217-136">Si establece `ConfirmImpact` en alto, la operación se confirmará de manera predeterminada.</span><span class="sxs-lookup"><span data-stu-id="13217-136">If you set `ConfirmImpact` to High, the operation will be confirmed by default.</span></span> <span data-ttu-id="13217-137">Reserve esta configuración para acciones muy perjudiciales, como volver a formatear un volumen de disco duro.</span><span class="sxs-lookup"><span data-stu-id="13217-137">Reserve this setting for highly disruptive actions, such as reformatting a hard-disk volume.</span></span>

## <a name="calling-non-confirmation-methods"></a><span data-ttu-id="13217-138">Llamar a métodos de no confirmación</span><span class="sxs-lookup"><span data-stu-id="13217-138">Calling Non-Confirmation Methods</span></span>

<span data-ttu-id="13217-139">Si el cmdlet o el proveedor deben enviar un mensaje pero no solicitar la confirmación, puede llamar a los tres métodos siguientes.</span><span class="sxs-lookup"><span data-stu-id="13217-139">If the cmdlet or provider must send a message but not request confirmation, it can call the following three methods.</span></span> <span data-ttu-id="13217-140">Evite usar el método [System. Management. Automation. cmdlet. writeObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) para enviar mensajes de estos tipos porque la salida [System. Management. Automation. cmdlet. writeObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) se entremezcla con la salida normal del cmdlet o proveedor, lo que dificulta la escritura de scripts.</span><span class="sxs-lookup"><span data-stu-id="13217-140">Avoid using the [System.Management.Automation.Cmdlet.WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) method to send messages of these types because [System.Management.Automation.Cmdlet.WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) output is intermingled with the normal output of your cmdlet or provider, which makes script writing difficult.</span></span>

- <span data-ttu-id="13217-141">Para precaución al usuario y continuar con la operación, el cmdlet o el proveedor pueden llamar al método [System. Management. Automation. cmdlet. WriteWarning](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) .</span><span class="sxs-lookup"><span data-stu-id="13217-141">To caution the user and continue with the operation, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.WriteWarning](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) method.</span></span>

- <span data-ttu-id="13217-142">Para proporcionar información adicional que el usuario pueda recuperar mediante el parámetro `Verbose`, el cmdlet o el proveedor pueden llamar al método [System. Management. Automation. cmdlet. WriteVerbose](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) .</span><span class="sxs-lookup"><span data-stu-id="13217-142">To provide additional information that the user can retrieve using the `Verbose` parameter, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.WriteVerbose](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) method.</span></span>

- <span data-ttu-id="13217-143">Para proporcionar detalles del nivel de depuración para otros desarrolladores o para el soporte técnico del producto, el cmdlet o el proveedor pueden llamar al método [System. Management. Automation. cmdlet. WriteDebug](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) .</span><span class="sxs-lookup"><span data-stu-id="13217-143">To provide debugging-level detail for other developers or for product support, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.WriteDebug](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) method.</span></span> <span data-ttu-id="13217-144">El usuario puede recuperar esta información mediante el parámetro `Debug`.</span><span class="sxs-lookup"><span data-stu-id="13217-144">The user can retrieve this information using the `Debug` parameter.</span></span>

<span data-ttu-id="13217-145">Los cmdlets y los proveedores llaman primero a los métodos siguientes para solicitar confirmación antes de intentar realizar una operación que cambia un sistema fuera de Windows PowerShell:</span><span class="sxs-lookup"><span data-stu-id="13217-145">Cmdlets and providers first call the following methods to request confirmation before they attempt to perform an operation that changes a system outside of Windows PowerShell:</span></span>

- [<span data-ttu-id="13217-146">System. Management. Automation. cmdlet. ShouldProcess</span><span class="sxs-lookup"><span data-stu-id="13217-146">System.Management.Automation.Cmdlet.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess)

- [<span data-ttu-id="13217-147">System. Management. Automation. Provider. Cmdletprovider. ShouldProcess</span><span class="sxs-lookup"><span data-stu-id="13217-147">System.Management.Automation.Provider.Cmdletprovider.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Provider.CmdletProvider.ShouldProcess)

<span data-ttu-id="13217-148">Para ello, se llama al método [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) , que pide al usuario que confirme la operación en función de cómo el usuario invocó el comando.</span><span class="sxs-lookup"><span data-stu-id="13217-148">They do so by calling the [System.Management.Automation.Cmdlet.Shouldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, which prompts the user to confirm the operation based on how the user invoked the command.</span></span>

## <a name="see-also"></a><span data-ttu-id="13217-149">Véase también</span><span class="sxs-lookup"><span data-stu-id="13217-149">See Also</span></span>

[<span data-ttu-id="13217-150">Escribir un cmdlet de Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="13217-150">Writing a Windows PowerShell Cmdlet</span></span>](./writing-a-windows-powershell-cmdlet.md)
